pipeline{

tools{
  maven 'mymaven'
}

agent {
  label 'linux_node'
}

parameters{
    choice(name: 'ENV', choices: ["","Dev","QA"])
}

stages{

stage('Build on Dev ENV'){
  when{  // when should this stage steps be exeucted 
     expression{params.ENV == "Dev"}   // expression = condition
  }
steps{
   git 'https://github.com/shubhamgunjal198/DevOpsClassCodes.git'
             //git 'https://github.com/shubhamgunjal198/DevOpsClassCodes.git'
            //git 'https://github.com/Sonal0409/DevOpsCodeDemo.git'
   sh 'mvn package'
}

}

stage('Test on QA ENV'){

when{
   expression{params.ENV == "QA"}   // expression = condition
}

 
steps{
   git 'https://github.com/Sonal0409/DevOpsCodeDemo.git'
   sh 'mvn test'
}
post{
  success{
emailext body: 'hi, this is job $job no', recipientProviders: [developers()], subject: 'Jenkins job', to: 'shubhamgunjal199@gmail.com'
  }
}

}

}

}
