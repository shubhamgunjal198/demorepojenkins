pipeline{
	agent any
	tools{
    maven 'mymaven'
	}
	stages{
    stage('checkout Code')
	{
	steps{
	git 'https://github.com/demo1orgtoday/SonarQubeCoverageJava.git'
	}
	}

stage('Build Code')
{
steps{
sh 'mvn package'
}
}
stage('SonarScan'){
environment{
scannerHome = tool 'sonartool'
	}
	steps{
withSonarQubeEnv('mysonar'){

	sh '''${scannerHome}/bin/sonar-scanner \
-Dsonar.projectKey=demo-sonar1_demo-sonar-project \
-Dsonar.java.binaries=target/classes \
-Dsonar.organization=demo-sonar1
'''
}

	}
	}
	}
}
